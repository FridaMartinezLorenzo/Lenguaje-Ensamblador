;MANEJO DEL MOUSE EN MODO GRAFICO
;------------------------------------------------
.MODEL SMALL
.STACK 100H

.DATA
MEN1 DB 'NO MOUSE DETECTADO$'

.CODE
MAIN PROC FAR
; Protocolo
PUSH DS
SUB AX, AX
PUSH AX
MOV AX, @DATA
MOV DS, AX
; Protocolo (End)
CALL GRAFICO
; Inicializacion del mouse
CALL INIT_MOUSE
CMP AX,0000
JE ERROR
CALL SHOW_CURSOR
MOV CX, 620
MOV DX, 410
CALL PUT_CURSOR
JMP EXIT
ERROR: LEA DX,MEN1
CALL MENSAJE
CALL LEE
JMP SALTE
EXIT: CALL LEE
CALL OCULTA_MOUSE
SALTE: CALL RESTAURA
CALL SAL_DOS
RET
MAIN ENDP

RESTAURA PROC
MOV AH, 00H
MOV AL, 03H
INT 10H
RET
RESTAURA ENDP

SAL_DOS PROC
MOV AH,4CH
INT 21H
RET
SAL_DOS ENDP

GRAFICO PROC 
; Inicializa modo grafico 640x480x16 (Begin)
MOV AH, 00H
MOV AL, 12H
INT 10H
; Inicializa modo grafico 640x480x16 (End)
RET
GRAFICO ENDP

INIT_MOUSE PROC 
MOV AX, 00H
INT 33H
RET
INIT_MOUSE ENDP

OCULTA_MOUSE PROC 
MOV AX, 02H
INT 33H
RET
OCULTA_MOUSE ENDP

SHOW_CURSOR PROC 
PUSH AX
MOV AX, 01H
INT 33H
POP AX
RET
SHOW_CURSOR ENDP

PUT_CURSOR PROC 
PUSH AX
MOV AX, 04H
INT 33H
POP AX
RET
PUT_CURSOR ENDP

LEE PROC
PUSH AX
MOV AH,01
INT 21H
POP AX
RET
LEE ENDP

MENSAJE PROC
PUSH AX
MOV AH,09H
INT 21H
POP AX
RET
MENSAJE ENDP

END MAIN