;  LEE UNA CADENA SERV 0A INT 21, USO BUFER
; ESCRIBE CARACTAER A CARACTER CONTENIDO

.MODEL small
.STACK  100

;DEFINICION DE AREAS DE TRABAJO1
.DATA
MSG1 DB "CADENA :$"
MSG2 DB "CADENA LEIDA: $"
MSG3 DB 10, 13, "$" 
MSG4 db "IMPRESION COMO CADENA: $"


Cadena LABEL byte
MAX Db 20
ACT Db ?
CONTE Db 20 DUP ("$"), "$"

CONTADOR DB ?

.CODE
PRINCI PROC FAR
   ;PROTOCOLO
   push ds
   sub ax,ax
   push ax
   MOV AX,@DATA
   MOV DS,AX
  ;INICIA PROGRAMA

    LEA DX, MSG1
    CALL MENSAJE

    CALL LEERCADENA

    LEA DX, MSG3
    CALL MENSAJE
    LEA DX, MSG2
    CALL MENSAJE

    MOV CX,00
    MOV CONTADOR,CH
    LEA SI, CADENA+1
    MOV CL, [SI]
    LEA DI, CADENA+2
OTRO:   MOV AL, [DI]
    INC DI
    CALL ASCII_BINARIO
    CALL IS_VOWEL
    LOOP OTRO

    CALL LEE
    
    LEA DX,MSG4
    CALL ESCRIBE_CADENA
    LEA DX,CADENA+2
    CALL ESCRIBE_CADENA
    
    CALL LEE

    ret

PRINCI ENDP

escribe_cadena PROC
    PUSH AX
    MOV AH,09
    INT 21H
    POP AX
    RET
escribe_cadena ENDP

escribe_car PROC
 PUSH AX
 MOV AH,02  ; Caracter a desplegar almacenado en dl
 INT 21h
 POP AX
 RET 
escribe_car ENDP


leercadena PROC
PUSH DX
PUSH AX
LEA DX,CADENA
MOV AH,0AH
INT 21H
POP AX
POP DX
RET
leercadena ENDP

MENSAJE PROC
PUSH AX
MOV AH,09H
INT 21H
POP AX
RET
MENSAJE ENDP

LEE PROC
PUSH AX
MOV AH,01
INT 21H
POP AX
RET
LEE ENDP

    ASCII_BINARIO PROC ;EL DATO SE GUARDA EN AL
    CMP AL,61H
    JG LETRAMINUS
    CMP AL,39H
    JG LETRAMAYUS
    SUB AL,30H ;RESTAR 30 QUE ES EL 0
    JMP FIN
    LETRAMAYUS:
      CMP AL,41H
      JL ERROR
      CMP AL,5AH
      JG ERROR
      SUB AL,37H ; RESTAR 37 PARA LLEGAR AL VALOR DE "A" QUE ES 10D
      JMP FIN
    LETRAMINUS:
      CMP AL,61H
      JL ERROR
      CMP AL,7AH
      JG ERROR
      SUB AL,57H ; RESTAR 37 PARA LLEGAR AL VALOR DE "A" QUE ES 10D
      JMP FIN
   ERROR:
   MOV AL,28H ;ES PARENTESIS QUE ABRE PERO ES UN CHAR NO VALIDO
      ;LEA DX,ERROR_MESSAGE
      ;CALL ESCRIBE_CADENA 
   FIN:
      RET
   ASCII_BINARIO ENDP
   
IS_VOWEL PROC
   ;EL DATO VIENE EN DL
   CMP AL,65H
   
IS_VOWEL ENDP
END PRINCI